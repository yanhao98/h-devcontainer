#!/usr/bin/env bash
set -o errexit    # å¯¹åº” -e
set -o nounset    # å¯¹åº” -u
set -o pipefail   # å¯¹åº” -o pipefail

mkdir -p /vscode/lingma-home
# æ£€æŸ¥è½¯é“¾æ¥æ˜¯å¦å·²æ­£ç¡®å»ºç«‹ï¼Œå¦‚æœæ˜¯åˆ™è·³è¿‡
if [ -L "$HOME/.lingma" ] && [ "$(readlink "$HOME/.lingma")" = "/vscode/lingma-home" ]; then
    echo "âœ… Lingma ä¸»ç›®å½•è½¯é“¾æ¥å·²å°±ç»ªï¼Œè·³è¿‡é…ç½®ã€‚"
    : # è½¯é“¾æ¥å·²æ­£ç¡®å»ºç«‹ï¼Œè·³è¿‡
else
    if [ -d "$HOME/.lingma" ]; then
        echo "ğŸ—‘ï¸  æ¸…ç†ç°æœ‰çš„ .lingma ç›®å½•..."
        rm -rf "$HOME/.lingma"
    fi
    echo "ğŸ”— åˆ›å»º Lingma ä¸»ç›®å½•è½¯é“¾æ¥..."
    ln -sfn /vscode/lingma-home ~/.lingma
fi