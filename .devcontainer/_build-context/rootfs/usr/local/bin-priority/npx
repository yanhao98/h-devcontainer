#!/bin/bash
set -o errexit
set -o nounset
set -o pipefail

# npx shim: 先确保 node 已安装（安装 node 后系统自然有 npx），然后执行真实的 npx
# @verify: npx --version

source /devcontainer/shim-utils.sh
_print_caller_info

npx_bin="$(_get-real-bin --silent npx)"

if [ -z "$npx_bin" ]; then
    echo "⚠️  npx 未找到，正在自动安装 Node.js..." >&2
    h-setup-node-bin >&2
fi

exec _exec-real-bin npx "$@"
