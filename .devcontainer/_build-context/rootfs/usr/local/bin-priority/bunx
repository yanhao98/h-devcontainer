#!/bin/bash
set -o errexit
set -o nounset
set -o pipefail

# bunx shim: 自动检测并安装 Bun，然后执行 bunx
# @verify: bunx --version

source /devcontainer/shim-utils.sh
_print_caller_info

bun_bin="$(_get-real-bin --silent bun)"

if [ -z "$bun_bin" ]; then
    echo "⚠️  Bun 未安装，正在自动安装..." >&2
    h-setup-bun-bin >&2
fi

exec _exec-real-bin bunx "$@"
